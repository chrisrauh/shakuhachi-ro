---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Shakuhachi Score Library" currentPage="browse">
  <div id="score-library"></div>

  <script>
    import { ThemeSwitcher } from '../components/ThemeSwitcher';
    import { AuthWidget } from '../components/AuthComponents';
    import { authState } from '../api/authState';
    import { ScoreLibrary } from '../components/ScoreLibrary';

    // Initialize theme switcher
    new ThemeSwitcher('theme-switcher');

    // Initialize auth widget
    const authWidget = new AuthWidget('auth-widget');

    // Subscribe to auth state changes
    authState.subscribe((user) => {
      if (user) {
        authWidget.setUser(user);
      } else {
        authWidget.setUser(null);
      }
    });

    // Initialize score library
    new ScoreLibrary('score-library');
  </script>
</Layout>
